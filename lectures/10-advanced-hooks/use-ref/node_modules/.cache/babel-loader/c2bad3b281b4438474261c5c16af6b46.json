{"ast":null,"code":"const timeScale = 15;\n\nfunction shiftLeft(ctx, px) {\n  const {\n    width,\n    height\n  } = ctx.canvas;\n  const imageData = ctx.getImageData(px, 0, width - px, height);\n  ctx.putImageData(imageData, 0, 0);\n  ctx.clearRect(width - px, 0, px, height);\n}\n\nexport function addPoint(canvas, prevPrice, price) {\n  const ctx = canvas.getContext(\"2d\");\n  const {\n    width,\n    height\n  } = canvas;\n  const y = height / 2 - price.value;\n  const prevY = height / 2 - prevPrice.value;\n  let prevX = prevPrice.ticks * timeScale + 4;\n  let x = price.ticks * timeScale; // scrollin\n\n  if (x + 4 > width) {\n    shiftLeft(ctx, 15);\n    x = width - 15;\n    prevX = x - 11;\n  }\n\n  if (prevPrice.value > price.value) {\n    ctx.fillStyle = \"red\";\n    ctx.strokeStyle = \"red\";\n  } else if (prevPrice.value < price.value) {\n    ctx.fillStyle = \"green\";\n    ctx.strokeStyle = \"green\";\n  } else {\n    ctx.fillStyle = \"black\";\n    ctx.strokeStyle = \"black\";\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(prevX, prevY);\n  ctx.lineTo(x, y);\n  ctx.stroke();\n  ctx.beginPath();\n  ctx.arc(x, y, 4, 0, Math.PI * 2);\n  ctx.fill();\n}","map":{"version":3,"sources":["/Users/louis/Desktop/Lectures/repos/local/SENG-LIVE-112221-phase-2/lectures/10-advanced-hooks/use-ref/src/utils/chart.js"],"names":["timeScale","shiftLeft","ctx","px","width","height","canvas","imageData","getImageData","putImageData","clearRect","addPoint","prevPrice","price","getContext","y","value","prevY","prevX","ticks","x","fillStyle","strokeStyle","beginPath","moveTo","lineTo","stroke","arc","Math","PI","fill"],"mappings":"AAAA,MAAMA,SAAS,GAAG,EAAlB;;AAEA,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,EAAxB,EAA4B;AAC1B,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBH,GAAG,CAACI,MAA9B;AACA,QAAMC,SAAS,GAAGL,GAAG,CAACM,YAAJ,CAAiBL,EAAjB,EAAqB,CAArB,EAAwBC,KAAK,GAAGD,EAAhC,EAAoCE,MAApC,CAAlB;AACAH,EAAAA,GAAG,CAACO,YAAJ,CAAiBF,SAAjB,EAA4B,CAA5B,EAA+B,CAA/B;AACAL,EAAAA,GAAG,CAACQ,SAAJ,CAAcN,KAAK,GAAGD,EAAtB,EAA0B,CAA1B,EAA6BA,EAA7B,EAAiCE,MAAjC;AACD;;AAED,OAAO,SAASM,QAAT,CAAkBL,MAAlB,EAA0BM,SAA1B,EAAqCC,KAArC,EAA4C;AACjD,QAAMX,GAAG,GAAGI,MAAM,CAACQ,UAAP,CAAkB,IAAlB,CAAZ;AACA,QAAM;AAAEV,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBC,MAA1B;AAEA,QAAMS,CAAC,GAAGV,MAAM,GAAG,CAAT,GAAaQ,KAAK,CAACG,KAA7B;AACA,QAAMC,KAAK,GAAGZ,MAAM,GAAG,CAAT,GAAaO,SAAS,CAACI,KAArC;AAEA,MAAIE,KAAK,GAAGN,SAAS,CAACO,KAAV,GAAkBnB,SAAlB,GAA8B,CAA1C;AACA,MAAIoB,CAAC,GAAGP,KAAK,CAACM,KAAN,GAAcnB,SAAtB,CARiD,CAUjD;;AACA,MAAIoB,CAAC,GAAG,CAAJ,GAAQhB,KAAZ,EAAmB;AACjBH,IAAAA,SAAS,CAACC,GAAD,EAAM,EAAN,CAAT;AACAkB,IAAAA,CAAC,GAAGhB,KAAK,GAAG,EAAZ;AACAc,IAAAA,KAAK,GAAGE,CAAC,GAAG,EAAZ;AACD;;AAED,MAAIR,SAAS,CAACI,KAAV,GAAkBH,KAAK,CAACG,KAA5B,EAAmC;AACjCd,IAAAA,GAAG,CAACmB,SAAJ,GAAgB,KAAhB;AACAnB,IAAAA,GAAG,CAACoB,WAAJ,GAAkB,KAAlB;AACD,GAHD,MAGO,IAAIV,SAAS,CAACI,KAAV,GAAkBH,KAAK,CAACG,KAA5B,EAAmC;AACxCd,IAAAA,GAAG,CAACmB,SAAJ,GAAgB,OAAhB;AACAnB,IAAAA,GAAG,CAACoB,WAAJ,GAAkB,OAAlB;AACD,GAHM,MAGA;AACLpB,IAAAA,GAAG,CAACmB,SAAJ,GAAgB,OAAhB;AACAnB,IAAAA,GAAG,CAACoB,WAAJ,GAAkB,OAAlB;AACD;;AAEDpB,EAAAA,GAAG,CAACqB,SAAJ;AACArB,EAAAA,GAAG,CAACsB,MAAJ,CAAWN,KAAX,EAAkBD,KAAlB;AACAf,EAAAA,GAAG,CAACuB,MAAJ,CAAWL,CAAX,EAAcL,CAAd;AACAb,EAAAA,GAAG,CAACwB,MAAJ;AAEAxB,EAAAA,GAAG,CAACqB,SAAJ;AACArB,EAAAA,GAAG,CAACyB,GAAJ,CAAQP,CAAR,EAAWL,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoBa,IAAI,CAACC,EAAL,GAAU,CAA9B;AACA3B,EAAAA,GAAG,CAAC4B,IAAJ;AACD","sourcesContent":["const timeScale = 15;\n\nfunction shiftLeft(ctx, px) {\n  const { width, height } = ctx.canvas;\n  const imageData = ctx.getImageData(px, 0, width - px, height);\n  ctx.putImageData(imageData, 0, 0);\n  ctx.clearRect(width - px, 0, px, height);\n}\n\nexport function addPoint(canvas, prevPrice, price) {\n  const ctx = canvas.getContext(\"2d\");\n  const { width, height } = canvas;\n\n  const y = height / 2 - price.value;\n  const prevY = height / 2 - prevPrice.value;\n\n  let prevX = prevPrice.ticks * timeScale + 4;\n  let x = price.ticks * timeScale;\n\n  // scrollin\n  if (x + 4 > width) {\n    shiftLeft(ctx, 15);\n    x = width - 15;\n    prevX = x - 11;\n  }\n\n  if (prevPrice.value > price.value) {\n    ctx.fillStyle = \"red\";\n    ctx.strokeStyle = \"red\";\n  } else if (prevPrice.value < price.value) {\n    ctx.fillStyle = \"green\";\n    ctx.strokeStyle = \"green\";\n  } else {\n    ctx.fillStyle = \"black\";\n    ctx.strokeStyle = \"black\";\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(prevX, prevY);\n  ctx.lineTo(x, y);\n  ctx.stroke();\n\n  ctx.beginPath();\n  ctx.arc(x, y, 4, 0, Math.PI * 2);\n  ctx.fill();\n}\n"]},"metadata":{},"sourceType":"module"}